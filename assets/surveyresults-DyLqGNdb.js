import{_ as p}from"./BaseChart-JPjS4Nuj.js";import{_ as g,o as i,e as y,c as h,a as t,w as r,b as S,bD as C,d as f,F as x,r as $,h as O,n as b,i as u,p as m,j as v,k as L,t as _,l as N}from"./index-De8-AJ5t.js";import{r as D,g as G,a as I,c as P}from"./index.esm2017-4DqxI0CK.js";const T={props:["formSubmissions"],data(){return{chartOptions:null}},async mounted(){await this.setUpChart()},watch:{formSubmissions:function(s){this.setUpChart()}},methods:{async setUpChart(){if(!this.formSubmissions)return;const s={};for(const o of this.formSubmissions)for(const n of o.selectedExperienceTags)s[n]===void 0&&(s[n]=0),s[n]++;const e=Object.entries(s);e.sort((o,n)=>n[1]-o[1]),this.chartOptions={chart:{type:"bar",height:300},title:{text:"What sort of experience are you looking to have?"},series:[{name:"No. of Responses",data:e.map(o=>o[1])}],xaxis:{categories:e.map(o=>o[0])},yaxis:{title:{text:"No. of Responses"}}}}},components:{BaseChart:p}};function j(s,e,o,n,a,d){const c=p;return i(),y(c,{chartOptions:a.chartOptions},null,8,["chartOptions"])}const w=g(T,[["render",j]]),E={props:["formSubmissions"],data(){return{chartOptions:null}},async mounted(){await this.setUpChart()},watch:{formSubmissions:function(s){this.setUpChart()}},methods:{async setUpChart(){const s={};for(const o of this.formSubmissions)for(const n of o.selectedGenreTags)s[n]===void 0&&(s[n]=0),s[n]++;const e=Object.entries(s);e.sort((o,n)=>n[1]-o[1]),this.chartOptions={chart:{type:"bar",height:300},title:{text:"What genres of games are you interested in?"},series:[{name:"No. of Responses",data:e.map(o=>o[1])}],xaxis:{categories:e.map(o=>o[0])},yaxis:{title:{text:"No. of Responses"}}}}},components:{BaseChart:p}};function M(s,e,o,n,a,d){const c=p;return i(),y(c,{chartOptions:a.chartOptions},null,8,["chartOptions"])}const k=g(E,[["render",M]]),F={props:["formSubmissions"],data(){return{chartOptions:null}},async mounted(){await this.setUpChart()},watch:{formSubmissions:function(s){this.setUpChart()}},methods:{async setUpChart(){const s=["Singleplayer","Multiplayer","Both"],e=Array(s.length).fill(0);for(const o of this.formSubmissions){const n=s.indexOf(o.selectedPlayerOption);n>=0&&e[n]++}this.chartOptions={chart:{type:"pie",height:400},title:{text:"Do you prefer a multiplayer or singleplayer experience?"},series:e,labels:s}}},components:{BaseChart:p}};function W(s,e,o,n,a,d){const c=p;return i(),y(c,{chartOptions:a.chartOptions},null,8,["chartOptions"])}const A=g(F,[["render",W]]),Y={props:["formSubmissions"],data(){return{chartOptions:null}},async mounted(){await this.setUpChart()},watch:{formSubmissions:function(s){this.setUpChart()}},methods:{async setUpChart(){const s=["Only recent games","Some older games","Mostly classics"],e=Array(s.length).fill(0);for(const o of this.formSubmissions){const n=s.indexOf(o.selectedGameAgeOption);n>=0&&e[n]++}this.chartOptions={chart:{type:"pie",height:400},title:{text:"What sort of games do you mostly play?"},series:e,labels:s}}},components:{BaseChart:p}};function J(s,e,o,n,a,d){const c=p;return i(),y(c,{chartOptions:a.chartOptions},null,8,["chartOptions"])}const U=g(Y,[["render",J]]),q={data(){return{recommendedApps:[],appsLoading:!1,formSubmissions:[],submissionsLoading:!1}},async mounted(){this.loadRecommendedApps(),this.loadSubmissions()},methods:{async loadRecommendedApps(){this.loading=!0;const s=await JSON.parse(localStorage.getItem("recommendedApps"));s?this.recommendedApps=s:this.recommendedApps=[],this.loading=!1},async loadSubmissions(){this.submissionsLoading=!0;const s=D(G(this.$firebaseApp)),e=await I(P(s,"formResults"));this.formSubmissions=Object.values(await e.val()),this.submissionsLoading=!1},htmlDecode(s){return new DOMParser().parseFromString(s,"text/html").documentElement.textContent}},components:{SurveyGameAgeChart:U,SurveyPlayerChart:A,SurveyGenreChart:k,SurveyExperienceChart:w}},z={key:0},H=["href"],K=["href"],Q={key:1},X={key:2},Z={key:3};function ss(s,e,o,n,a,d){const c=U,V=A,B=k,R=w;return i(),h(x,null,[t(S,null,{default:r(()=>e[0]||(e[0]=[u("Recommendations Survey")])),_:1}),t(C,{active:a.appsLoading,indeterminate:""},null,8,["active"]),a.recommendedApps.length>0?(i(),h("div",z,[t(f,null,{default:r(()=>e[1]||(e[1]=[u(" Thank you for taking the survey! Below are some games that we think you might enjoy, based on your answers. You can click on them to visit their store page on Steam. ")])),_:1}),(i(!0),h(x,null,$(a.recommendedApps,l=>(i(),y(N,{class:"my-4"},{default:r(()=>[t(b,null,{default:r(()=>[t(m,{cols:"5"},{default:r(()=>[v("a",{href:l.storeURL,target:"_blank"},[t(L,{src:l.headerImageURL,height:"200",class:"headerImage"},null,8,["src"])],8,H)]),_:2},1024),t(m,{cols:"7"},{default:r(()=>[t(b,null,{default:r(()=>[t(m,{cols:"8"},{default:r(()=>[t(S,null,{default:r(()=>[v("a",{href:l.storeURL,target:"_blank"},_(l.name),9,K)]),_:2},1024)]),_:2},1024),t(m,{cols:"4"},{default:r(()=>[u(_(l.releaseDate),1)]),_:2},1024)]),_:2},1024),t(f,null,{default:r(()=>[u(" Relevancy score: "+_(Math.round(l.relevancyScore))+"           User ratings: "+_(Math.round(l.reviewScore))+"% positive ",1)]),_:2},1024),t(f,null,{default:r(()=>[u(_(d.htmlDecode(l.description)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))])):a.appsLoading?O("",!0):(i(),h("div",Q,[t(f,null,{default:r(()=>e[2]||(e[2]=[u(" You have not taken the survey. ")])),_:1})])),t(S,null,{default:r(()=>e[3]||(e[3]=[u("Other Participants' Answers")])),_:1}),t(C,{active:a.submissionsLoading,indeterminate:""},null,8,["active"]),a.formSubmissions.length>0?(i(),h("div",X,[t(b,null,{default:r(()=>[t(m,{cols:"6"},{default:r(()=>[t(c,{formSubmissions:a.formSubmissions},null,8,["formSubmissions"])]),_:1}),t(m,{cols:"6"},{default:r(()=>[t(V,{formSubmissions:a.formSubmissions},null,8,["formSubmissions"])]),_:1})]),_:1}),t(b,null,{default:r(()=>[t(m,{cols:"6"},{default:r(()=>[t(B,{formSubmissions:a.formSubmissions},null,8,["formSubmissions"])]),_:1}),t(m,{cols:"6"},{default:r(()=>[t(R,{formSubmissions:a.formSubmissions},null,8,["formSubmissions"])]),_:1})]),_:1})])):a.submissionsLoading?O("",!0):(i(),h("div",Z,[t(f,null,{default:r(()=>e[4]||(e[4]=[u(" No survey submissions found. ")])),_:1})]))],64)}const ns=g(q,[["render",ss]]);export{ns as default};
